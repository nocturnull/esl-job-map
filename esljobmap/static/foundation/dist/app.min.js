!function(t){var e={};function i(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var s=class{constructor(){this.useExistingResume=$("#id_use_existing_resume"),this.resumeFileUploadField=$("#resumeFileUploadField")}isValid(){return this.useExistingResume.length>0}init(){this.isValid()&&this.useExistingResume.change(t=>{this.resumeFileUploadField.toggleClass("invisible")})}};var a=class{constructor(){this.visaType=$("#id_visa_type"),this.visaConditions=$("#visaConditions")}isValid(){return this.visaType.length>0}init(){this.isValid()&&this.visaType.change(t=>{2===this.visaType.val()&&this.visaConditions.toggleClass("invisible")})}};var r=class{constructor(){this.map=null,this.currentMarker=null,this.infoWindow=null,this.geocoder=null,this.latitude=0,this.longitude=0,this.address="",this.$form=null,this.$addressForm=null,this.$addressInput=null,this.$addressError=null,this.$locationError=null,this.$generalJobFields=null,this.googleMarkerMap={},this.googleMarkerMapListeners={}}init(){let t=document.getElementById("map");null!==t&&(this.map=new google.maps.Map(t,{zoom:window.jobMap.zoom,center:{lat:window.jobMap.lat,lng:window.jobMap.lng},mapTypeControlOptions:{mapTypeIds:["roadmap"]},mapTypeControl:!1,streetViewControl:!1}),this.addExistingJobMarkers(),this.infoWindow=new google.maps.InfoWindow,this.geocoder=new google.maps.Geocoder,this.$addressError=$("#addressSearchError"),this.$locationError=$("#postJobLocationError"),this.$addressInput=$("#mapAddressInput"),window.jobMap.isRecruiter&&this.map.addListener("click",t=>{this.placeMarkerAndPanTo(t.latLng)}),this.$form=$("#jobPostForm"),this.$form.submit(t=>(this.$locationError.addClass("no-show"),this.latitude>0&&this.longitude>0?this.submitMapData(this.$form.attr("action")):this.$locationError.removeClass("no-show"),t.preventDefault(),!1)),this.$addressForm=$("#addressSearchForm"),this.$addressForm.submit(t=>(this.$addressError.addClass("no-show"),t.preventDefault(),this.geocodeAddressAndPlaceMarker($("#mapAddressInput").val()),!1)),this.$generalJobFields=$("#generalJobFields"))}addExistingJobMarkers(){for(let t=0;t<window.jobMap.markers.length;t++){let e=window.jobMap.markers[t],i=new google.maps.LatLng(e.lat,e.lng),s=this.resolveIconImage(e),a=new google.maps.Marker({position:i,optimized:!1,icon:this.makeComplexIcon(s)});a.setMap(this.map);let r=a.addListener("mouseover",()=>{this.infoWindow.setContent(e.content),this.infoWindow.open(this.map,a)});this.googleMarkerMap[e.id]=a,this.googleMarkerMapListeners[e.id]=r}}resolveIconImage(t){let e=window.jobMap.iconImage;return window.jobMap.isRecruiter?0===t.isJobPoster&&(e=window.jobMap.disinterestedIconImage):1===t.hasApplied?e=window.jobMap.appliedIconImage:1===t.isDisinterested&&(e=window.jobMap.disinterestedIconImage),e}updateExistingJobMarker(t,e,i){let s=this.googleMarkerMap[t],a=1===i?window.jobMap.disinterestedIconImage:window.jobMap.iconImage;s.setIcon(this.makeComplexIcon(a));let r=this.googleMarkerMapListeners[t];google.maps.event.removeListener(r),delete this.googleMarkerMapListeners[t],s.addListener("mouseover",()=>{this.infoWindow.setContent(e),this.infoWindow.open(this.map,s)}),this.infoWindow.close()}placeMarkerAndPanTo(t){null!==this.currentMarker&&this.currentMarker.setMap(null),this.currentMarker=new google.maps.Marker({position:t,map:this.map,icon:this.makeComplexIcon(window.jobMap.iconImage),animation:google.maps.Animation.DROP,draggable:!0}),this.map.panTo(t),google.maps.event.addListener(this.currentMarker,"dragend",t=>{this.retrackCurrentLocation(t.latLng)}),this.retrackCurrentLocation(t)}retrackCurrentLocation(t){this.latitude=t.lat(),this.longitude=t.lng(),this.geocodeLatLng(this.latitude,this.longitude,this.currentMarker)}makeComplexIcon(t){return{url:t,size:new google.maps.Size(30,30),scaledSize:new google.maps.Size(30,30)}}geocodeAddressAndPlaceMarker(t){this.geocoder.geocode({address:t},(t,e)=>{if("OK"===e){let e=t[0].geometry.location,i=t[0].formatted_address;this.map.setCenter(e),null!==this.currentMarker&&this.currentMarker.setMap(null),this.currentMarker=new google.maps.Marker({map:this.map,position:e,icon:window.jobMap.iconImage,animation:google.maps.Animation.DROP}),this.latitude=e.lat(),this.longitude=e.lng(),this.address=i,this.infoWindow.setContent(i),this.infoWindow.open(this.map,this.currentMarker)}else this.$addressError.removeClass("no-show")})}geocodeLatLng(t,e,i){let s={lat:t,lng:e};this.geocoder.geocode({location:s},(t,e)=>{"OK"===e?t[0]?(this.address=t[0].formatted_address,this.$addressInput.val(t[0].formatted_address),this.infoWindow.setContent(this.address),this.infoWindow.open(this.map,i)):console.log("No results found"):console.log("Geocoder failed due to: "+e)})}submitMapData(t){let e={csrfmiddlewaretoken:$('input[name="csrfmiddlewaretoken"]').val(),title:$("#id_title").val(),class_type:$("#id_class_type").val(),contact_name:$("#id_contact_name").val(),contact_email:$("#id_contact_email").val(),contact_number:$("#id_contact_number").val(),schedule:$("#id_schedule").val(),other_requirements:$("#id_other_requirements").val(),is_full_time:$('input[name="is_full_time"]:checked').val(),salary:$("#id_salary").val(),benefits:$("#id_benefits").val(),pay_rate:$("#id_pay_rate").val(),latitude:this.latitude,longitude:this.longitude,address:this.address};$.ajax({type:"POST",url:t,data:e}).done(t=>{let e=$.parseHTML(t),i=$(e).find("#generalJobFields");t.includes("jobPostListConfirm")?window.location="/employment/recruiter/job/my-jobs":this.$generalJobFields.html(i.html())})}};class o{constructor(t,e,i){this.tagList=t.split(","),this.$dom=$(e),this.$parent=i,this.isDetached=!1,this.detachedCase=null}hasTag(t){for(let e=0;e<this.tagList.length;e++)if(this.tagList[e].trim()===t.trim())return!0;return!1}detach(){this.detachedCase=this.$dom.parent().detach(),this.isDetached=!0}attach(){this.$parent.append(this.detachedCase),this.isDetached=!1}}var n=class{constructor(){this.$searchFilters=$("#searchFilters"),this.$cards=$(".flow-card"),this.$filterCardsParent=$("#filterCardsParent"),this.flowCardList=[],this.listFilterResults=null,this.buttonList=[]}isValid(){return this.$searchFilters.length>0}init(){this.isValid()&&(this.listFilterResults=$("#listFilterResults"),this.buttonList=this.$searchFilters.find("button"),this.attachFilterListeners(),this.organizeData())}attachFilterListeners(){for(let t=0;t<this.buttonList.length;t++){let e=$(this.buttonList[t]);e.on("click",()=>{let t=e.data("filtertag");0===e.data("isactive")?(this.applyFilter(t),e.data("isactive",1)):(this.removeFilter(t),e.data("isactive",0)),this.applyDisabledButtonAppearances(t)})}}organizeData(){for(let t=0;t<this.$cards.length;t++){let e=this.$cards[t];this.flowCardList.push(new o($(e).data("filtertaglist"),e,this.$filterCardsParent))}}applyFilter(t){for(let e=0;e<this.flowCardList.length;e++){let i=this.flowCardList[e];i.hasTag(t)||i.isDetached||i.detach()}this.updateDisplayCount()}applyDisabledButtonAppearances(){for(let t=0;t<this.buttonList.length;t++){let e=$(this.buttonList[t]);1===e.data("isactive")?e.attr("class","secondary-button"):e.attr("class","disabled-button")}}removeFilter(t){for(let e=0;e<this.flowCardList.length;e++){let i=this.flowCardList[e];!i.hasTag(t)&&i.isDetached&&i.attach()}this.updateDisplayCount()}updateDisplayCount(){let t=this.flowCardList.length;if(this.$filterCardsParent.children().length===this.flowCardList.length)this.listFilterResults.html(`Currently displaying ${t}/${t}`);else{let e=this.$filterCardsParent.children().length;this.listFilterResults.html(`Currently displaying ${e}/${t}`)}}};$(document).foundation(),$(document).ready(function(){let t=new s,e=new a,i=new n;t.init(),e.init(),i.init()}),window.initMap=function(){let t=new r;t.init(),window.jobMapHandle=t},window.updateMapMarker=function(t,e,i,s){return t.preventDefault(),$.ajax({type:"GET",url:$(e).attr("href")}).done(t=>{window.jobMapHandle.updateExistingJobMarker(i,t,s)}),!1}}]);