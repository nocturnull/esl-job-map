{% extends 'base.html' %}

{% load job_post %}

{% block title %}{{ title }}{% endblock %}

{% block content %}

    <div id="map" class="google-map {{ map_class }}"></div>

    {% if user.is_recruiter %}
        {% if is_full_time %}
            {% include 'recruiter/job_post_full_time_form.html' with form_title='Pick a location on the map' %}
        {% else %}
            {% include 'recruiter/job_post_part_time_form.html' with form_title='Pick a location on the map' %}
        {% endif %}
    {% endif %}

{% endblock %}

{% block postjavascript %}
    <script>
        window.mapMarkers = [];
        window.mapIconImage = '{{ icon_image }}';
        window.mapDisinterestedIconImage = '{{ disinterested_icon_image }}';
        window.mapAppliedIconImage = '{{ applied_icon_image }}';

        {% if user.is_recruiter %}
            window.isRecruiter = true;
        {% else %}
            window.isRecruiter = false;
        {% endif %}

        {% for job_post in object_list %}
            window.mapMarkers.push({
                lat: {{ job_post.latitude }},
                lng: {{ job_post.longitude }},
                content: '{% build_info_html job_post user %}',
                hasApplied: {% has_applied job_post user %},
                isDisinterested: {% is_disinterested job_post user %}
            });
        {% endfor %}
    </script>
{% endblock %}