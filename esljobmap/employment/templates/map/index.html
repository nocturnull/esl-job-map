{% extends 'base.html' %}

{% block title %}{{ title }}{% endblock %}

{% block content %}

    <div id="map" class="google-map {{ map_class }}"></div>

    {% if user.is_recruiter %}
        {% if is_full_time %}
            {% include 'recruiter/job_post_full_time_form.html' with form_title='Pick a location on the map' %}
        {% else %}
            {% include 'recruiter/job_post_part_time_form.html' with form_title='Pick a location on the map' %}
        {% endif %}
    {% endif %}

{% endblock %}

{% block postjavascript %}
    <script>
        window.mapMarkers = [];
        window.mapIconImage = '{{ icon_image }}';

        {% if user.is_recruiter %}
            window.isRecruiter = true;
        {% else %}
            window.isRecruiter = false;
        {% endif %}

        {% for job_post in object_list %}
            window.mapMarkers.push({
                lat: {{ job_post.latitude }},
                lng: {{ job_post.longitude }},
                content: '{{ job_post.html_content|safe }}'
            });
        {% endfor %}
    </script>
{% endblock %}